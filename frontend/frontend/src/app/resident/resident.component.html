<h2>Residents List</h2>

<!-- Add Resident 
<h3>Add New Resident</h3>
<form (ngSubmit)="addResident()">
  <input type="text" [(ngModel)]="newResident.name" placeholder="Name" name="name" required>
  <input type="email" [(ngModel)]="newResident.email" placeholder="Email" name="email" required>
  <input type="text" [(ngModel)]="newResident.phone" placeholder="Phone" name="phone" required>
  <input type="text" [(ngModel)]="newResident.apartment" placeholder="Apartment" name="apartment" required>
  <button type="submit">Add Resident</button>
</form>
-->
<!-- Edit Resident 
<div *ngIf="selectedResident">
  <h3>Edit Resident</h3>
  <form (ngSubmit)="updateResident()">
    <input type="text" [(ngModel)]="selectedResident.name" name="name" required>
    <input type="email" [(ngModel)]="selectedResident.email" name="email" required>
    <input type="text" [(ngModel)]="selectedResident.phone" name="phone" required>
    <input type="text" [(ngModel)]="selectedResident.apartment" name="apartment" required>
    <button type="submit">Update Resident</button>
    <button (click)="selectedResident = null">Cancel</button>
  </form>
</div>
-->

<!-- List Residents 
<table>
  <tr>
    <th>Name</th>
    <th>Email</th>
    <th>Phone</th>
    <th>Apartment</th>
    <th>Action</th>
  </tr>
  <tr *ngFor="let resident of residents">
    <td>{{ resident.name }}</td>
    <td>{{ resident.email }}</td>
    <td>{{ resident.phone }}</td>
    <td>{{ resident.apartment }}</td>
    <td>
      <button (click)="editResident(resident)">Edit</button>
      <button (click)="deleteResident(resident._id)">Delete</button>
    </td>
  </tr>
</table>
-->


<!--
<h2>Resident Management</h2>

<form (ngSubmit)="addResident()">
  <input type="text" [(ngModel)]="newResident.name" name="name" placeholder="Name" required>
  <input type="email" [(ngModel)]="newResident.email" name="email" placeholder="Email" required>
  <input type="text" [(ngModel)]="newResident.phone" name="phone" placeholder="Phone" required>
  <input type="text" [(ngModel)]="newResident.apartment" name="apartment" placeholder="Apartment" required>
  <button type="submit">Add Resident</button>
</form>

<table>
  <tr>
    <th>Name</th>
    <th>Email</th>
    <th>Phone</th>
    <th>Apartment</th>
    <th>Actions</th>
  </tr>
  <tr *ngFor="let resident of residents; let i = index">
    <td>{{ resident.name }}</td>
    <td>{{ resident.email }}</td>
    <td>{{ resident.phone }}</td>
    <td>{{ resident.apartment }}</td>
    <td>
      <button (click)="editResident(resident)">Edit</button>
      <button (click)="deleteResident(i)">Delete</button>
    </td>
  </tr>
</table>

<h2>Edit Resident</h2>
<form (ngSubmit)="updateResident()">
  <input type="text" [(ngModel)]="selectedResident.name" name="name" placeholder="Name" required />
  <input type="email" [(ngModel)]="selectedResident.email" name="email" placeholder="Email" required readonly />
  <input type="text" [(ngModel)]="selectedResident.phone" name="phone" placeholder="Phone" required />
  <input type="text" [(ngModel)]="selectedResident.apartment" name="apartment" placeholder="Apartment" required />
  <button type="submit">Save Changes</button>
</form>



<link rel="stylesheet" href="resident.component.css">
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector(".resident-form");

    // Function to get stored residents from Local Storage
    function getStoredResidents() {
        return JSON.parse(localStorage.getItem("residents")) || [];
    }

    // Function to save residents to Local Storage
    function saveResidents(residents) {
        localStorage.setItem("residents", JSON.stringify(residents));
    }

    form.addEventListener("submit", function (event) {
        event.preventDefault();

        // Get user input values
        const name = document.getElementById("name").value.trim();
        const email = document.getElementById("email").value.trim();
        const address = document.getElementById("address").value.trim();
        const phone = document.getElementById("phone").value.trim();

        // Validation: Ensure all fields are filled
        if (!name || !email || !address || !phone) {
            alert("All fields are required!");
            return;
        }

        // Validation: Check for unique email and phone
        let residents = getStoredResidents();
        let emailExists = residents.some(resident => resident.email === email);
        let phoneExists = residents.some(resident => resident.phone === phone);

        if (emailExists) {
            alert("This email is already registered!");
            return;
        }

        if (phoneExists) {
            alert("This phone number is already registered!");
            return;
        }

        // Save the new resident data
        const newResident = { name, email, address, phone };
        residents.push(newResident);
        saveResidents(residents);

        alert("Registration successful!");
        form.reset(); // Clear the form
    });
});

</script>
-->
<!--
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SMS</title>
  <link rel="stylesheet" href="resident.component.css">
</head>
<body>
  <nav class="navbar">
    <img src="assets/images/logo.jpg" alt="logo" class="logo" >

    <h2 style="margin-bottom: -5px;margin-left: -630px;color:'white';">Society Management System</h2>

    <ul class="nav-links">
      <li><a routerLink="/admin-home" class="home-button">Home</a></li>
      <li><a routerLink="/admin-about" class="home-button">About</a></li>
      <li><a routerLink="/residents" class="home-button">Resident</a></li>
      <li><a routerLink="/login" (click)="logout()">Logout</a></li>
      
-->
      <!--<li><a routerLink="/login" class="home-button">Logout</a></li>
      <li><a routerLink="/admin" class="home-button">Admin</a></li> --> 

<!--
    </ul>
  </nav>
<h2 style="margin-top: 37px;">Add New Resident</h2>
<br>

-->
<!-- Add Resident Form -->
<!--
<form (ngSubmit)="addResident()">
  <input type="text" [(ngModel)]="newResident.name" name="name" placeholder="Name" required />
  <input type="email" [(ngModel)]="newResident.email" name="email" placeholder="Email" required />
  <input type="text" [(ngModel)]="newResident.phone" name="phone" placeholder="Phone" required />
  <input type="text" [(ngModel)]="newResident.apartment" name="apartment" placeholder="Apartment" required />
  <button style="width: 137px;" type="submit">Add Resident</button>
</form>
-->
<!-- Resident List -->
<!--
 <h2 style="margin-top: 37px;">List of Resident</h2>
<table style="margin-top: 5px; border: solid 2px;">
  <tr style="border: solid 1px;">
    <th style="border: solid 1px;">Name</th>
    <th style="border: solid 1px;">Email</th>
    <th style="border: solid 1px;">Phone</th>
    <th style="border: solid 1px;">Apartment</th>
    <th style="border: solid 1px;">Actions</th>
  </tr>
  <tr *ngFor="let resident of residents">
    <td style="border: solid 1px;">{{ resident.name }}</td>
    <td style="border: solid 1px;">{{ resident.email }}</td>
    <td style="border: solid 1px;">{{ resident.phone }}</td>
    <td style="border: solid 1px;">{{ resident.apartment }}</td>
    <td>
      <button (click)="editResident(resident)">Edit</button>
      <button (click)="deleteResident(resident._id)">Delete</button>
    </td>
  </tr>
</table>
-->
<!-- Edit Resident Form -->
 <!--
<div *ngIf="selectedResident">
  <h2>Edit Resident</h2>
  <form (ngSubmit)="updateResident()">
    <input type="text" [(ngModel)]="selectedResident.name" name="name" required />
    <input type="email" [(ngModel)]="selectedResident.email" name="email" required readonly />
    <input type="text" [(ngModel)]="selectedResident.phone" name="phone" required />
    <input type="text" [(ngModel)]="selectedResident.apartment" name="apartment" required />
    <button style="width: 137px;" type="submit">Save Changes</button>
    <button style="width: 137px;" (click)="selectedResident = null">Cancel</button>
  </form>
</div>
</body>
</html>-->




<!--
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SMS</title>
  <link rel="stylesheet" href="resident.component.css">
</head>
<body>
  <nav class="navbar">
    <img src="assets/images/logo.jpg" alt="logo" class="logo" >

    <h2 style="margin-bottom: -5px;margin-left: -630px;color:'white';">Society Management System</h2>

    <ul class="nav-links">
      <li><a routerLink="/admin-home" class="home-button">Home</a></li>
      <li><a routerLink="/admin-about" class="home-button">About</a></li>
      <li><a routerLink="/residents" class="home-button">Resident</a></li>
      <li><a routerLink="/login" (click)="logout()">Logout</a></li>
      
-->
      <!--<li><a routerLink="/login" class="home-button">Logout</a></li>
      <li><a routerLink="/admin" class="home-button">Admin</a></li> --> 

<!--
    </ul>
  </nav>
<h2 style="margin-top: 37px;">Add New Resident</h2>
<br>
<form (ngSubmit)="addResident()" enctype="multipart/form-data">
  <input type="text" [(ngModel)]="newResident.name" name="name" placeholder="Name" required />
  <input type="email" [(ngModel)]="newResident.email" name="email" placeholder="Email" required />
  <input type="text" [(ngModel)]="newResident.phone" name="phone" placeholder="Phone" required />
  <input type="text" [(ngModel)]="newResident.apartment" name="apartment" placeholder="Apartment" required />
  <input type="file" (change)="onFileSelected($event)" />
  <button type="submit">Add Resident</button>
</form>

<table>
  <tr>
    <th>Name</th>
    <th>Email</th>
    <th>Phone</th>
    <th>Apartment</th>
    <th>Image</th>
    <th>Actions</th>
  </tr>
  <tr *ngFor="let resident of residents">
    <td>{{ resident.name }}</td>
    <td>{{ resident.email }}</td>
    <td>{{ resident.phone }}</td>
    <td>{{ resident.apartment }}</td>
    <td>
      <img *ngIf="resident.image" [src]="'http://localhost:5000' + resident.image" width="50" />
    </td>
    <td>
      <button (click)="editResident(resident)">Edit</button>
      <button (click)="deleteResident(resident._id)">Delete</button>
    </td>
  </tr>
</table>
-->

<!-- Edit Resident Form -->
<!--
<div *ngIf="selectedResident">
  <h2>Edit Resident</h2>
  <form (ngSubmit)="updateResident()">
    <input type="text" [(ngModel)]="selectedResident.name" name="name" required />
    <input type="email" [(ngModel)]="selectedResident.email" name="email" required readonly />
    <input type="text" [(ngModel)]="selectedResident.phone" name="phone" required />
    <input type="text" [(ngModel)]="selectedResident.apartment" name="apartment" required />
    <input type="file" (change)="onFileSelected($event)" />
    <button type="submit">Save Changes</button>
    <button (click)="selectedResident = null">Cancel</button>
  </form>
</div>

</body>
</html>
-->


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SMS</title>
  <link rel="stylesheet" href="resident.component.css">
</head>
<body>
  <nav class="navbar">
    <img src="assets/images/logo.jpg" alt="logo" class="logo" >

    <h2 style="margin-bottom: -5px;margin-left: -630px;color:'white';">Society Management System</h2>

    <ul class="nav-links">
      <li><a routerLink="/admin-home" class="home-button">Home</a></li>
      <li><a routerLink="/admin-about" class="home-button">About</a></li>
      <li><a routerLink="/residents" class="home-button">Resident</a></li>
      <li><a routerLink="/login" (click)="logout()">Logout</a></li>
      

      <!--<li><a routerLink="/login" class="home-button">Logout</a></li>
      <li><a routerLink="/admin" class="home-button">Admin</a></li> --> 


    </ul>
  </nav>
<h2 style="margin-top: 37px;">Add New Resident</h2>
<br>
<form (ngSubmit)="addResident()" enctype="multipart/form-data">
  <input type="text" [(ngModel)]="newResident.name" name="name" placeholder="Name" required />
  <input type="email" [(ngModel)]="newResident.email" name="email" placeholder="Email" required />
  <input type="text" [(ngModel)]="newResident.phone" name="phone" placeholder="Phone" required />
  <input type="text" [(ngModel)]="newResident.apartment" name="apartment" placeholder="Apartment" required />
  <input type="file" (change)="onFileSelected($event)" accept="image/*" required />
  <button type="submit">Add Resident</button>
</form>

<!-- Display Resident List with Images -->
<h2>List of Residents</h2>
<table>
  <tr>
    <th>Name</th>
    <th>Email</th>
    <th>Phone</th>
    <th>Apartment</th>
    <th>Image</th>
    <th>Actions</th>
  </tr>
  <tr *ngFor="let resident of residents">
    <td>{{ resident.name }}</td>
    <td>{{ resident.email }}</td>
    <td>{{ resident.phone }}</td>
    <td>{{ resident.apartment }}</td>
    <td><img [src]="'http://localhost:5000' + resident.image" width="50" height="50" alt="Resident Image"></td>
    <td>
      <button (click)="editResident(resident)">Edit</button>
      <button (click)="deleteResident(resident._id)">Delete</button>
    </td>
  </tr>
</table>

<!-- Edit Resident Form -->
<div *ngIf="selectedResident">
  <h2>Edit Resident</h2>
  <form (ngSubmit)="updateResident()">
    <input type="text" [(ngModel)]="selectedResident.name" name="name" required />
    <input type="email" [(ngModel)]="selectedResident.email" name="email" required readonly />
    <input type="text" [(ngModel)]="selectedResident.phone" name="phone" required />
    <input type="text" [(ngModel)]="selectedResident.apartment" name="apartment" required />
    <input type="file" (change)="onFileSelected($event)" />
    <button type="submit">Save Changes</button>
    <button (click)="selectedResident = null">Cancel</button>
  </form>
</div>

</body>
</html>